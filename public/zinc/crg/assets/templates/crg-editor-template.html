
<div id="crg">
  <div ng-class="{&quot;selecting-from-passage&quot;: editor.passageSelector.selecting}" class="crg-editor">
    <div class="editor-bar crg-bar">
      <div class="actions">
        <button class="primary">Publish</button>
        <button><a ui-sref="crg.editor.preview">Preview</a></button>
      </div>
      <div class="selection-heading">
        <div ng-bind="editor.passageSelector.heading.label" class="heading"></div>
        <div class="help">
          <div ng-bind="editor.passageSelector.heading.description" class="tooltip"></div>
        </div>
      </div>
    </div>
    <div class="crg-passage">
      <div ng-init="passage = editor.passageSelector.passage" class="passage">
        <div class="title"><span>From:&nbsp;</span><span ng-bind="passage.from" class="from"></span></div>
        <div class="author"><span>By&nbsp;</span><span ng-bind="passage.by" class="by"></span></div>
        <div on-text-select="onTextSelect($selection.indices)" ng-class="{&quot;focusing&quot; : game.player.state.focusPhrase.indices.length || editor.passageSelector.selection.focus.indices.length}" class="text phrase-selector selection-pointer">
          <div class="selection-options">
            <div ng-show="game.player.state.textSelectedIsClose" class="close-enough-selection">
              <label>Almost there. You need to select complete phrase</label>
            </div>
            <div class="passage-selection">
              <button ng-click="editor.passageSelector.selection.setFocus($selection.indices)" ng-show="editor.passageSelector.selection.selectingFocus" class="selectFocus">Set Focus</button>
              <button ng-click="editor.passageSelector.selection.setPhrase($selection.indices)" ng-show="editor.passageSelector.selection.selectingPhrase" class="selectPhrase">Set Phrase</button>
            </div>
          </div>
          <div ng-repeat="word in passage.words" ng-class="{&quot;line-break&quot; : word.linebreak, &quot;highlight&quot;: word.highlight, &quot;focus&quot;: word.focus, &quot;flash&quot;: word.flash}" data-word-number="{{$index}}" class="word">{{word.text}}</div>
        </div>
      </div>
    </div>
    <div class="crg-editor-form">
      <div ng-repeat="scene in editor.script.scenes" ng-init="sceneIndex = $index" class="scene-editor card">
        <div class="accordion-bar">
          <label>{{$index +1}}. {{scene.label}}</label>
          <button ng-click="editor.previewScene(scene)" class="remove">Preview</button>
          <button ng-click="editor.removeScene(scene)" class="remove">Remove</button>
        </div>
        <div class="scene-config-form">
          <div ng-if="scene.name == &quot;zinc-visualize&quot;" class="zinc-visualize">
            <div class="scene-param">
              <label class="param-label">Focus</label>
              <input type="text" disbaled="true" ng-model="scene.config.focus.text" class="param-input"/>
            </div>
            <div class="scene-param">
              <label class="param-label">Phrase</label>
              <input type="text" disbaled="true" ng-model="scene.config.phrase.text" class="param-input"/>
            </div>
            <div class="scene-param">
              <label class="param-label">Transcript</label>
              <textarea ng-model="scene.config.transcript.text" class="param-input"></textarea>
            </div>
          </div>
          <div ng-if="scene.name == &quot;zinc-imagine&quot;" class="zinc-imagine">
            <div class="scene-param">
              <label class="param-label">Focus</label>
              <input type="text" disbaled="true" ng-model="scene.config.focus.text" class="param-input"/>
            </div>
            <div class="scene-param">
              <label class="param-label">Phrase</label>
              <input type="text" disbaled="true" ng-model="scene.config.phrase.text" class="param-input"/>
            </div>
            <div class="scene-param">
              <label class="param-label">Transcript</label>
              <textarea ng-model="scene.config.transcript.text" class="param-input"></textarea>
            </div>
            <div class="scene-param">
              <label class="param-label">Correct Usage</label>
              <div class="param-input">
                <div ng-repeat="usage in scene.config.usages" class="input-options">
                  <input type="checkbox" ng-model="usage.correct" class="check"/>
                  <input ng-model="usage.label" class="checked"/>
                </div>
                <button ng-click="scene.config.usages.push({label: &quot;&quot;, correct: false})">Add Usage</button>
              </div>
            </div>
          </div>
          <div ng-if="scene.name == &quot;find-all-key-images&quot;" class="find-all-key-images">
            <div class="scene-param">
              <label class="param-label">Key Images</label>
              <div class="param-input">
                <div ng-repeat="keyImage in scene.config.keyImages" class="input-options">
                  <input type="text" disabled="disabled" ng-model="keyImage.phrase.text"/>
                </div>
              </div>
            </div>
            <div class="scene-param">
              <label class="param-label">Transcript</label>
              <textarea ng-model="scene.config.transcript.text" class="param-input"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ui-view></ui-view>
</div>